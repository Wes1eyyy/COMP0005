### 有向图 (Directed Graphs)

有向图（或称为digraph）是图中的一种，其中所有的边都有特定的方向。这表示了从一个顶点到另一个顶点的单向关系。在有向图中，如果存在从顶点 A 到顶点 B 的边，不一定存在从顶点 B 到顶点 A 的边。

**特点**：
- **边是有方向的**：每条边从一个顶点指向另一个顶点。
- **不对称**：顶点 A 可以到顶点 B，但不意味着 B 可以到 A。

### 有向图中的连通性

有向图的连通性更复杂，分为强连通和弱连通：
- **强连通**：如果图中的每对顶点都是互相可达的，则称该图为强连通。
- **弱连通**：如果将有向图的所有有向边替换为无向边后，图变成连通的，则称该图为弱连通。

使用DFS分析有向图的连通性：
- **弱连通分量**：可以通过简单地忽略边的方向并使用DFS来确定。
- **强连通分量**：需要更复杂的处理，例如Kosaraju算法或Tarjan算法，这些算法使用两次DFS来识别所有强连通分量。首先在原图上执行DFS来确定顶点的完成时间，然后在反向图（边的方向反转）上按完成时间的逆序执行第二次DFS。每次DFS可以发现一个强连通分量。

#### 拓扑顺序(Topological Order)
![[Pasted image 20240513233915.png]]

#### 后序(Post - Order)
![[Pasted image 20240513234422.png]]
反向后序是对图中所有顶点的一种排序，该排序基于DFS完成对每个顶点的探索时间（post-order）。简单来说，反向后序是指在DFS完成时，顶点被记录下来的逆序。

### 深度优先搜索的后序
要理解反向后序，首先需要明白什么是DFS的后序：
- 在DFS中，从某个顶点开始递归探索其所有未访问的邻接点。
- 每当从一个顶点的DFS递归调用返回时，该顶点的处理被认为是完成的。
- **后序**就是记录下每个顶点完成探索的顺序。

### 应用
反向后序在许多图算法中都非常有用，尤其是在有向图的分析中：
- **拓扑排序**：对于有向无环图（DAG），反向后序提供了一种拓扑排序。如果图中没有环，反向后序即是图的一个有效的拓扑排序。
- **强连通分量**：在诸如Kosaraju-Sharir算法中，第一次DFS在原图上生成顶点的完成时间，第二次DFS在图的转置（所有边的方向反向）上按照第一次DFS的完成时间的反向后序来执行，这有助于找出图中的强连通分量。
- **优化递归函数调用**：在编译器优化中，基于反向后序对函数调用图进行排序可以优化递归函数的调用顺序，减少运行时的栈使用。

### 生成反向后序的过程
生成反向后序的步骤通常如下：
1. 对图执行一次完整的DFS。
2. 记录每个顶点的完成时间（即在DFS中被完全探索的顺序）。
3. 将完成时间的列表逆序，得到反向后序。